fun main()=java.io.File("i").readLines().map{it.toMutableList()}.run{var(r,c)=indexOfLast{'^' in it}to first{'^' in it}.indexOf('^');var d=-1 to 0;while(r in indices&&c in get(0).indices){get(r)[c]='X';if(getOrNull(r+d.first)?.getOrNull(c+d.second)=='#')d=when(d){-1 to 0->0 to 1;0 to 1->1 to 0;1 to 0->0 to-1;else->-1 to 0};r+=d.first;c+=d.second};println(sumOf{it.count{it=='X'}})}