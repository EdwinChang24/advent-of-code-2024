fun main()=java.io.File("i").readLines().run{val n=mutableSetOf<Pair<Int,Int>>();for(r in joinToString("").toSet().filter{it!='.'})mapIndexed{i,l->l.mapIndexed{j,c->if(c==r)i to j else null}.filterNotNull()}.flatten().run{forEach{a->forEach{b->if(a!=b){n+=a.first*2-b.first to a.second*2-b.second;n+=b.first*2-a.first to b.second*2-a.second}}}};println(n.count{it.first in indices&&it.second in get(0).indices})}